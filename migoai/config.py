import json
import os
from pathlib import Path

HOME_DIR = str(Path.home())
CONFIG_DIR = os.path.join(HOME_DIR, '.migoai')
CONFIG_FILE = os.path.join(CONFIG_DIR, 'config.json')
AVAILABLE_MODELS = ["magnum-12b-v2", "FlowGPT-Ares", "nemomix-v4"]
MAX_WIDTH = 80

def ensure_config_dir():
    """Ensure the config directory exists."""
    if not os.path.exists(CONFIG_DIR):
        os.makedirs(CONFIG_DIR, exist_ok=True)

def load_config():
    """Load configuration from JSON file in user's home directory."""
    ensure_config_dir()
    if os.path.exists(CONFIG_FILE):
        with open(CONFIG_FILE, 'r', encoding='utf-8') as f:
            try:
                return json.load(f)
            except json.JSONDecodeError:
                return {"default_character": ""}
    return {"default_character": ""}

def save_config(config):
    """Save configuration to JSON file in user's home directory."""
    ensure_config_dir()
    with open(CONFIG_FILE, 'w', encoding='utf-8') as f:
        json.dump(config, f, indent=4)


TOEKN = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImxuczNKSG9QWjl0X1RVbFV1UWZPVCIsImVtYWlsIjoiZGVuaXNlbXluYW1lOUBnbWFpbC5jb20iLCJzdWIiOiJsbnMzSkhvUFo5dF9UVWxVdVFmT1QiLCJpYXQiOjE3MzExMDM5MDUuOTAzLCJleHAiOjE3MzE3MDg3MDV9.jexGq7soYRjU0_SNs8I-BWtQVz49olJZ8_WtWrhhR6yvOpXfWiv1T3JoaIITLsUmeazu7enZPjB5f-R7RXWec3oPk11frjxodvkqZjwqyRMdaogVdy8o_hKxkT4ulzeXAl7tQL0fZQN9azH80h4OxebaNov_4aICDdJjpMRrGgJCSqU_O-Gld2JdrQJLWi6JBEQYaQIrefvkzziyUMzJ6x1jBhpe6-KNGNtCXGEXUt_G6hOpMVIu7l7ySDw-TUav8jiZq89C0RBh8pbSSfQgoBz-pdpcSgjmtBkSGnicsPuJEtFvzjphOR2h8y4oE8FD6IkwLy0M_rivFABLIF1TzA"

TOKEN_DATA = '{"challenge":{"input":"eyJ2ZXJzaW9uIjoxLCJ1YmlkIjoiNTNhN2M0MjItNTU3Zi00YTBkLTliMGMtNjc0ZDZiMmJjMGNkIiwiYXR0ZW1wdF9pZCI6IjlhNDY4NjgxLWFiMjUtNDZkOC1iNWViLWM2NWYzODlkZDcxMiIsImNyZWF0ZV90aW1lIjoiMjAyNC0xMS0wOVQwNTowNzoxOC43NjUyMTkzNTFaIiwiZGlmZmljdWx0eSI6OCwiY2hhbGxlbmdlX3R5cGUiOiJIYXNoY2FzaFNIQTIifQ==","hmac":"jDJTUHFWqCWR8x5VzwJVc9UrsnuWlLvzqqyYv+jddo8=","region":"us-east-2"},"solution":"211","signals":[{"name":"KramerAndRio","value":{"Present":"cYQPysNbKAT56tM4::edeeacc36d86d248823dab9ece52c511::d25e3f422c78f613025a9031a82dca6bd323ab4d6f010ef57572a34a4e17e23c20d41dfd1a48aafb8d6def453d6774e61bdf2b394650e33d8e93220a7d11331d9250178da6bff3338f77bc856ea8bc6628c699185ee9949666b4dec123bfa8fd2f273c3136322999fc82be1c3dd3381c7ab1f935a7375a41b90902294192884c3bcb75aa1ae385bec503d8209557b75f3044d525d881dd9f09502ed90f1fe3c5fd09a2ebbb2f9f4857209dd7a073b6db84b65bdc1b2497fa3b0bec694d9dc8d08631f954cbca56fab783d82ce4f0f94fd876eef4e770b1ec49dc34a4ebccb1868feb606bc647f6c953e8c97c1bce618b9f80b8d097f687d338c74d27c8c94e73df3b6450e60b19523194f4aa2ce45daa461d8b83c1cc6bcd7a17908675ddd269f111101496425ae253b2109fb86dffa6ff364d27847514cab97abe1d8e2aa0c9916abd7a569c8beeb13f95d4bef8dc05dff631c7c3a0bd0a9293345d1ccffd04eee1cd7413fcdecb4a90695579ce608098b52698d4e0d7f7bceb5fa0a5bc573e80317e7b0741c41f3d2000716399840a1d0ff4ec312bbfbb27f365c3eb0a5a217d15edeb52cc156c4bbf7de0f07c3535726b1cd50c11fb8f0a57c02f70cbf6533fa3e76dd127cecc3250382ad859834da4a59f1648df1f776984d243fd0563bfe93fbb780046b205b86f1b1dcc5b92a8b1ee0a8a620af0763a560d5621f603a432582c25145ae2e64a6a349e1d42b5a7e1688a72bce9f31b9eb396b053f1d96555a5f6ef74777af4c16c33edffaf3b481d18f13ca50ccd540ae712683215b4c6eca51dc82be7867c8d9ac9745fa6c73bf843e71fb6ea9214c72e8b7975e292d6c9240586099616261f56bd51510912e299a12b657bb6a63e7f7fa42f20d3d2b645b5afc186ec37e466a06d9d19d8440be59163aae1597304f88dda3e940743f52122674d7d115803edab9f4c2df646707212372bfa88808e0994b33c552ac7b0012d3da0f9039da1a2909e5ea0fd5f3621f3e1572f85e3150b137de6aded238a7231cad7ae3d827f4beae7a67b1086406ed2ad9ad9d49484bbc3de410e5e8abf5c2fef1bbb3e80deeb3ea963a6644e3258f0fc873b25b7d815867e6d2b5c1afe5bbdbfdb577d0dff27f4b7531c2507eb851a6d430de6b99f585b5cdda7e535d2d9b8dc3c298ee24aff1bffc269a604027738d84ddef8e97ea2e84a3ea90aafecb12ba46bac8ccbaa19363c77ec0334345e52045c25c182d82884fb0c907a853fc5e6d38e075fa140b82a0765e425eb64788f917fdf6626157337db4a0b8151353856aa39ae4d124b2004807c6e34b884318826bcfc0e92e062c1ee511cf621e8b755dbf6ef34d9baee7a8b0a28fedaec435e4cc7b690c45366778fb21e8820ea087aba46aa83339ffaea2381571a65f0352b1a32a0ee49d2f78f73683d0a59ef0263883427770a724d2aef44c9585630a962c055d9be7f72851decfa7ae880149dc1a2a9004a7393b161560d7f9ebdf92aa3569f9aa93834595d5d6751b1c4e60033b7ace2625e64622d393536b637fbb4f34bd9c1bd62744f8953144b4aa64657abe2e7a942c430b4d1a63910d2a2360a1728fee27baaec9f728af9d69ec1d269d03162a401a93ee1059468e0367dc9b99ccea4758a90c9c2276a071918b0479a2da8277aa626fc32899dc1628c928ef60999de8d5cdd8d7d7dcf65858b2966ebaf0680fc441c5c1ac29a9014eda4ba105a2da9ccf9440439e5bc233cd3f786e4c303781b34c4e85999c1583ae27cb3eb4ad06082b9aae620e8a455ca62a28891f2d76d424892521762dc74657c6e1e6cff36975c57b531dc2fb2f9263551777cf231e8166f6f8185653df50d7c5d08090acffead8430c8e822d1ab42d7af46b2f502775815e9e87af75b99dcd47c33b00fa3565daefc64615b3c75162e3c5334c0e7cb5f0867d862ee6ad5a011a1dd8020f680fd6b6c3d7b1c920e365bbabcceae08b0f2a99448cddd0c697c25994cef93802ca294a1517325c97eb483b763d28dd9931fff19dc6338375521a5f9fbc4a94d1d845ab792e43a0594b5ba9b85dea9d425c20613919df70d30abaf20b9cae452140532c430aeb9858c73a13fdfd1afdf151a3ce3ffd066eeb337d149284c260708a68a566d7b830b24c17a8363a1b276286621cab7b93a9e4cce60d466a0ecc2c091be5785cc9913180da492a32f76edd11ceac51a2cd431f8cc9b726ee63f6a4a0f3e7a1a6b98b710979cf90531d2db0e4c9cc595b715a9c6ae9c912ab863745fbbe67e99e94526417a8c2a2305f12f01fd48d8abd62f1bd5e3fec4d3c5ef5328130668171baaf85252fa42ffb34af6b02f55ece9d0e47f60a1ab5027baea477be3aeedfbef964ee34aca9502ffc21b74b832fb5a117646880e0d13e19459ac55b0fef0250950384644a73cdc1b6c22e85831fb2e9fb691e6436a008c48834252fa8a59378ee541fdac7d8347e99ed59e0819028e761b10d6c39bc5a76f7db1283fec0d19c4189a2bcdb16cc158a819a8869c92c590c70dbd081c6e3656e5a92398e04056773c463bd5f34dce60aad05ec587f207092d9f91200313b2bfad0e7badc73acd32e9d5b35ce8a42b664dfaea81bca31f887c0b2bbb4599247dab045a75ed7ac7467ecf0d1b12c10c3c3ba7f07f1ed73d52e0ed24411d067f5fb14f210fae96d779a14ab4b650864d5690df82cf62dfc65b40cc96c72cdb8f24a0bee33690991ece2298621c9f97df5ecc129c806da3a83ce14d01226053dd464bf89fc972a294edc143623c95662bbeb68e95d1dc1e0227954555c051cd961bf9601c7ff82d187adcf55b53b61316c5d657e56f102ce17fbf834e77058c5e2976f0b4149ef9885fb9854754365954b650f823462e341950449efd632943b77b96afbd30f6792182ccf075ea9bc01d1233295c76fd579dd6a566bab3d5ba23086aa8788bcdc682c25a904a63325283330d99ccca408c9b85ec6b1e5f97f26d25c73e4de6590e08fc9656e7d578548320150f04037cc42b8b20f2ee927845d67cffbfa851934f546a0ebcb65ba0d2d1d9e6b2d40bf6e4490fa49fb3f7500d16dcc535eda7f772dfac7639d191efddb436b2cb01f59e77d776c1bd2bbc5f6a3c208d3d1aba44f0888eb3a08a864ede685393c2f38e0ca04132c602e326d1d3a2f7d4c05cf5386669229185d4d19534f41d7d753787b714a8fcefc2a63b34282068592bef8e4af51d0c51de76faad0b295dc1704886db507267da14650e554cbd745ead420a2b72043ad1338b86b0a9b783980c1141841b710234beb72fb0715bd07e72e80f59dfaf273f41af83f35beed5dac9dfad2baa58017d053453872a42dbdadc0aa0166abdc940bb6598684b3302b470b3261ee3b9db4a9966f001ab69a5b205dc2e77ed7bb7d4570e51debb151714c0cd447037f0fa8628d8cffad586444b500a3acdd644596a5cb2a985a6af37d44882d566fa9fb0d30370d968d3418a1b311f1a7f5eb43d4e8693dc2f0b3bfd289925dcd7e363aa2f573f8fe91c32b2a6fde93d05c39954af87c721a0ecb516c1c248925c934474d423fdb25d0ea0a4d1b6e7309369fb09967388ec094ebdf65d44f8cc6705e748a66051730634d37d5e4912d406b4d0bfa25b396e176a9846536de06a3b79b7cf5c9f4dd4469f921af5cd326ef13e620cd0542f6dfa901126d870a9ea3f5b2ef3476690849a364dbcd474d5bc681d48d18334511fc89210de30d68c04b471d4447bb00b12eabd846f569b1bae8e4c5c4997a964b82125156fd7fe5c5afcc93854a479baaee0fce1dd4739783df2ccd777c3dd48d476a5c37ea2beb3bda8be726e1863e547431bda3486eee098e614b2b6ce62aad13fb51edc71835fe70a14d509f5435c42fc26a873350c508c76fd036abe0a963cdb98d0125d21d5e324a5de7b560260239458aee242a9f1fbeded7741ab6cf50282c63e146cb0af19e6b9c38dff1128d4278ce65dfbe6a28c4e9df9757c80af9962b8673d4b662a428d31bdfd84f9066a4c7f7ae353a845134e6fb2cada42a4456b853fe376697cd967ce52dca05d6dda41b8f55bbb7476620469fc4c3c58395df004b8f00fe83597d28be706dbea874b5607dec3f602e327b64c43303306d5ffb231c1b0f804a758c2527f72d12962bc89c3c6bbe3b447bf81ba4b726091829a94b9ca3b04193b168bca4840c70e3231a9275bfe7a9b50ef89530039de8b2d340c82eb83b263a46ebd84070397fbbfaecca1b4b8c6680b9a00ce70301472ffcbd6bd45de757c8b3c26050eff7d1d2efaea19999bbd94385c09a24503a093ee6e0e93e9eb34686979d4aafb544d5f9c9791f58d4541ddc3a6cea2217f337947dcd26d8f0fc44aafc20089b15748f299520410e0266c15662360b0f08f006a5640468f9bb0ea7ac1484ad93dfdee76199dc61998461b2a10f8d664cf9a716ac92884192d2c962aa297294ed951d35b5f6ec4546b5c1718b244d941db0c215a3d50a30f566375f88a48eed9ecaa175fcb91e5455c07c4e26088d6c79f9fce6a35a29ec4f982daaef961314d19836b0497a1504641892e8574374f2d702cba10b3c00aa061e355dfec2a412dc4635d59254793fd552886aeec9fa70bb39c98a6b3640cb8fc76b1f4785cf68e1995de89ddc06492cc8cbecf9e9bc17fa2989b4fc010e912668f68be8b71389f5cdb1a6a9d9a7dee500a99194610442a8f900835bc7961d77a1d43cbe6a1920531942d6c2bd84d84642ef449d78a7aaa8275e7f61ef2a184541ff2d02c03f15d7cb06eef050dd91f92efe3fafbc0a6f0de07c6aae1309545891de407c39d79fb43fd1252108eadd737ca54ab8ec4a2f46ec6d52cd8a939d67124dc8cab926a026c8fe1e9ec6b5a5bf54ddb23654708dc4c11ff1d48750cc9d8f3bf88e2661ce7073592aa8b3b7f0ea0ee6317d63eb01ab4f716341c71f317851c75d957df4024341281e6c77c4e1f1d5555797e573b5ca3a144f5267e2ef49404ed79fab7a9c60cf72c3625344022e6acad29f7928f096d0442698dacbde9968951582292b57902ab4c53232ea24315384d40b78856fa0d3f4cedc554649be8a8f2e6da4482e99e7c3d061fa84d2f7e217598744b671e1b1c2e3f9f34056cc1721711a42507d384323c911d1a8451089aae3f137c5d0e65272437be49a40aa88935fa3d71f3"}}],"checksum":"DFA8B26C","existing_token":null,"client":"Browser","domain":"studio.flowgpt.com","metrics":[{"name":"2","value":0.39999999944120646,"unit":"2"},{"name":"100","value":1,"unit":"2"},{"name":"101","value":0,"unit":"2"},{"name":"102","value":1,"unit":"2"},{"name":"103","value":11,"unit":"2"},{"name":"104","value":1,"unit":"2"},{"name":"105","value":0,"unit":"2"},{"name":"106","value":0,"unit":"2"},{"name":"107","value":1,"unit":"2"},{"name":"108","value":0,"unit":"2"},{"name":"undefined","value":0,"unit":"2"},{"name":"110","value":1,"unit":"2"},{"name":"111","value":15,"unit":"2"},{"name":"112","value":0,"unit":"2"},{"name":"undefined","value":1,"unit":"2"},{"name":"3","value":4.3999999994412065,"unit":"2"},{"name":"7","value":0,"unit":"4"},{"name":"1","value":39.40000000037253,"unit":"2"},{"name":"4","value":15.599999999627471,"unit":"2"},{"name":"5","value":0.40000000037252903,"unit":"2"},{"name":"6","value":55.40000000037253,"unit":"2"},{"name":"0","value":721.5999999996275,"unit":"2"},{"name":"8","value":1,"unit":"4"}]}'