import json
import os
from pathlib import Path

HOME_DIR = str(Path.home())
CONFIG_DIR = os.path.join(HOME_DIR, '.migoai')
CONFIG_FILE = os.path.join(CONFIG_DIR, 'config.json')
AVAILABLE_MODELS = ["magnum-12b-v2", "FlowGPT-Ares", "nemomix-v4"]
MAX_WIDTH = 80

def ensure_config_dir():
    """Ensure the config directory exists."""
    if not os.path.exists(CONFIG_DIR):
        os.makedirs(CONFIG_DIR, exist_ok=True)

def load_config():
    """Load configuration from JSON file in user's home directory."""
    ensure_config_dir()
    if os.path.exists(CONFIG_FILE):
        with open(CONFIG_FILE, 'r', encoding='utf-8') as f:
            try:
                return json.load(f)
            except json.JSONDecodeError:
                return {"default_character": ""}
    return {"default_character": ""}

def save_config(config):
    """Save configuration to JSON file in user's home directory."""
    ensure_config_dir()
    with open(CONFIG_FILE, 'w', encoding='utf-8') as f:
        json.dump(config, f, indent=4)

TOEKN = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImxuczNKSG9QWjl0X1RVbFV1UWZPVCIsImVtYWlsIjoiZGVuaXNlbXluYW1lOUBnbWFpbC5jb20iLCJzdWIiOiJsbnMzSkhvUFo5dF9UVWxVdVFmT1QiLCJpYXQiOjE3MzA5NzU5NDcuNDYsImV4cCI6MTczMTU4MDc0N30.J6Xq_S_DfD7nNm1rFSlZDN2QToF4S8LdvtPxduyycFyiwPCVT-QSkrYqUBAFtFph0ZHN4tAhDUuf4i4GhJEncax4otZYgwDBM008oDVzECaheerO1X4EFh4lbRpVideeZfK_Mm319fcy0XlmYg_MVRrOF0XkEwwt5CUPZJ0FM_PdRWm7lYZEyBq1qe01LJTlYrIf_w-vwLfhgUYjbPrPDBm8ch84jWGiIz_042VUyWDxX84a3gLpQ_39scKj5uSll19dQKgGSWexLerFlxDjE6AEmLBkWRyStG17v9SUlO6HqrPAmRO3hZ39-EAoUhQkIDIoobxLl5ctf4IjgPrYVA"

TOKEN_DATA = '{"challenge":{"input":"eyJ2ZXJzaW9uIjoxLCJ1YmlkIjoiMmEzZDhlZWMtYjZmMS00NDIyLThhNzAtMWNhNTI1M2Y2ZTdlIiwiYXR0ZW1wdF9pZCI6IjJlYzA4NDU0LWZmZmYtNGNlZC1hZTdjLWU5ZmJjMjE5NGUwMyIsImNyZWF0ZV90aW1lIjoiMjAyNC0xMS0wOFQxMDozODozMi42ODQ1MjY4NTNaIiwiZGlmZmljdWx0eSI6NCwiY2hhbGxlbmdlX3R5cGUiOiJIYXNoY2FzaFNjcnlwdCJ9","hmac":"5sCZFed5iiV43Rx1qMu20L7fSMu+m/CkOqCz67y8ukM=","region":"us-east-2"},"solution":"21","signals":[{"name":"KramerAndRio","value":{"Present":"sqyMHph87lJAmGWT::0ccac26c291c530386e6313cd1008ddb::2cdf8703708933fc19900054b264fd2c59b2f925c2005a1ee4301e1ef1b67fbe65b3a5842308e386d680fd5d06a2203ac3e224b4af170c3571291a293fc3e639d48ed5378e3c1e0fa43aaf93333eb87f05e10ac80816ce28bbcbb6fcf11c0b3ec35ce197640f4a3ba140a0ad4427258e707802f5b147f5464ef38946a47a7cd127f9c516a870fc0dfe1c76a4a8d5305140529f5f69b4c085304ea4a16f322a0e94881e4873bbdd286fe33aa4a68837de00f848f3a059987905bb23c15b52144132b76a276e5433760e6378de84879d83d35408a6dee4619474c8df8e49b79084368c2eaebbe53367be40a22ae92d3140ca253b569044608481b558eb830762fc7fac67a31dc1e24afbb859800382bf54e1801d739e4fe7ff5a08fe1eda267638ecb9cc797fc05563575072c44c42b2f6f756af68795855c07664987f471608dbc2b2fb937adf7a84f1ec226211a3cde05510d7a435c3b26e08466d23e8be7306bc0fd32d075d26d231a3b217742e06b33bfc20b44eb52243174350c1e25c88f47e125a124f1fd8ebe018dc4a72b5fdcba222075afcbaedc7b3fe34aed459a19d115076dbb035b51beeab335a076da0e77c3c9acb8103ce9f5b42311168d43d821b00af795c3b5368358473766f2f7cde65670acee04f4d9adb7d0f7341f626ba442f674fc758936bd2124ce29b6c95963870538c26b5070de72f5149c18e78cece5598e52aad5b334ecf0229c9dbb58a0214e31b45053e6b7b775e9f8bc23a0288ad9bdafbeefda7411f9b04d62b0bfb11809b8eb4e4946b99a593e25cc83174589adacef8bb2b9b4f0d966a3fc096619c51b968920d6db6f4af2e896ef82afb1b45608904f0ac252d88ed2129cf912cbd22cba4a068854a38ca84540ed7d5bfcd18d40d85a16dd6d146ec9ca3e8cc24318323b6076c29d7dd5954b4328b662182a8e468cf15b2a0a9d980ff958db49a0ec13fb7f9bba9f63e473680c4c9527b9b6ab3b14a9f58b353971b7e9a3eb80a9b763756c4b5a44fc4a8c43669677e5f5bb6c391ac03099187754c9c0b5b5923e00f6cc705d801ae5ef8ca1b7ea4b3ede1d3af3cd8f34b027e4e45228156b01dbb1bc52061c2807f14c4f186d5862710e480418ea2b6cd5eb2e98e2c2b6ed11d900d621e005b3a191789e1dbad42bca0835bc24b567d71bfdb83e3c3558715fe7e95ba918c098cb06fea42dd73aa57cd17006af0a6b016aaaedf7e1e3ff5036abf5d40dbb00e6704960879b0bf924b7058acb29b21cc591601f9ce848c76ea218e1bf93265848ef54f37fdcf930e8254a2a07b34190619d9f8a2ae6e16055d970a2c5b84b216194fd4fe261b08af401e45a211d0950a27df86f61a1d68692041bfe3747a005b51d1fe6d09f46cdeaf4247fe45b65c97e15b0aa87952770b1bb047151566d3c137b91e987f881249ef0d876209d6bce1f4ea02291cdfa1c78c28e97c9b9b690ec52061d3cbf61b55566f448f4ddab9b398a56c7119e0e1d7ff24566d7303eedd4343fdc8e0a28ae0a59d1979bc29c809c83528775e2cf43a13750f60de3214ff2fcc935450091eb5b014347fa879ab013d09b6efea77be92fd57463fd94865e31e556192cb8a528acdf44e58b28bb15b5551311412d9cbfd7dc0b9cf299e895d3bbd1a9892f89810fab3c6ab4c638b924c8dc30274073022bae1b486ca5217b02c188a6c6fd6a22e362ae3b63ed47a5421f3fd1cb9b6b5aa2f67e3adeace59f83cedbfab431d16812a4f38ae22743666d54eefdc15c4693979985b21c629cebba72835c1b677d6d406a6862c5fcb29d2e0d8f21e53351ed20a7db24f57b7a9aecc06370e3bccb34017149410ac15dcc4ce8eb5e92c55a581b8a8758702476ad63fd77de0d72650307f7a48e3f551a3bbcd37499915968dffeee61fdb99b33e2c218377f19ce3c47e87b879cbb7a826516f8323500adf871729eb869d76bee44fdc3bbf0a9a078e72201970b6d093094b27390fec1d339603ebdcbff68fa2519df85429e67f15669808b1bbad7415e593c8fee844348f9bf8d90337e399f8be0377cb3b102881c2c6eb489024ff7723e5b6cc2be1165f90bd121316b6fbe732836b346279de3c1ec8915b67cb5be9ee840531e403578d7500ccd8e49ed58c426d6c6176d1aedfaa25279f8f0ab5fc85ff5dd2aea3888922d29fef1723d18b7863d239879ae7de39fd7d861495efd1402518563d7ad966cfb8e199bf7491829774d5f2090b97c83c0a640a7d8c9ffd4cfae5d1b85d5d02aa696b33173257ef58f6042eefbc7ae54c0c487679630e5a3b8579e595caa26820fa15636d73f657ec09e08c4c209eab1ca3e3a5cdcd8af30d5c3d1463d2ff7bd5609ee1bd81250bed4f339a1d82060f60c778907cebb40727641ba29696b790b4c30661130407e23f8b14835c8b2add4dcfffcd03f87bc0a7dca0112d075582ccaeddfcc584a99d1a3547852e105f9bda08f5196a8a3c9cd368f77ad831475ddb5d78224e1d38950f7ae7c6b56b681888b82de1d75df797efab54e9f054fcaac0c76181bfa3ac8fd4953541e5b7e276050bfd8eb26e8aac0a96d2bfb6f1f1f52b06153e6225d1e2a8fba6b9fbeeaaace5947f51823918f5a0c368d8a8dcb337f0b01abce5460db521dcc8bc4fea4bbfe6df1ed53351d88f25fc9fcb43a181b89473972cf27a3bb2cc9b6736798e93228199c7078858dcdad42f77a643b2b866f9a380ea60ddb6eca5952e3b50928cb950ffdf559244d70b372e62948134d4c235c6252c007f5124a4c04ebee29003429db781c218bc7ad0417d5c4b4388b803eb4457c98d5660b69048a6f4924cecee78b84eb2353b430354665d7470b616617d29fb51f088ebfb289575d04f12deca0a64970288a7bd6e9690c46bd8505f3ce81f70e558d350a506c88300b7b4f35cac6498afb7f39d0570237e9e7c31804c3daeb871d9e4f9e83f16c1a5e622ccceca21b0aea16bdd182b6e9fe8d6eed037da963c74ef371813ec2dfc553b75f967eeb78fdb2765f5b22cc00c28d4c0bd5b2dccd85202446f04d0198e5956590ed7ddb23e1f0de9ff4d0de1ee4e851ba9d7c50cca3ab2f98f9128f46f406238f526309e5a32ebe0c66d8be2c5362b0ca68522ac5930fc2f4333122eec4b80622d27792769b70cc3da27c0c62aa07ed0e9c9bffc8850ea6f38c66f54417234014f471964c4bd6e30250ada3b3daad017812d0651e36d49ae6bb8a90c8d3d9eca36b9297f97ac68a3167c1962735e82281882c4845c47ae13292bdefcc292f61ca62ca3eeddba113c184f200b3d666f75f18677632542e5332e9388473dee702133347832a47717efbd1ff456f2c6e140ca210541160ce3a7af41781cd87efc0300276875f37f468e43fe273ac5784e375edcc9221ec5fb49a25f4041e3f7bbd0bb62df09ba036fc4bddd0b0709d15beee7c8b464659786b3b07aa3bffa7457439068448b1006513426f0566139ba7a81c9bd7ba0e14d331cf47c67f71502b59bfbfdd09b1e136cb18b5a1118cfa9419d2e665069147b8f1afacc1bdb577ecb9518fcb904085cbec39552e92ae02117327d1e2c0b96810e5fedce8064c30ad81ec2974df5eda1e920ef26ffa75caafe3b40f750a05bb5d00a09ae1e82b9931460840521d6843317a56b092b7f8b3c5292b8e61c3cdad16c07f998bf407710a39843c4bf475158b0a847f3e209638fba1e986d7ad44dd4241ffe789b8e79babac5b0c6922b7c6c4492e6054e102b161dab21bd9019778eec119afc808eafb65bc5dd57d889cb951847af72c1d31d2f51decf1ba196505ac4e003e0b3ef87382aee83a7affa4162b8c6bed5f135847dbf96b10ab01026449574018f507565c1205926346261fb9b6c00f054740f7c7b58f240ecca2632969a4b99783513a6a7793259ffd9dfc508420c7345e92c751ff946f199a95072fb7669c146784fc4f1b90d4f0dcba7ca795fe105bc00b79a00dcd5b3b859a6a2efa0d6b8de59730a0e2728f9e0214cbaf1f0ca1d3c4da3fe09cf0d1767a6a86680febee7c7229ff0253b48a23f11ed0aac4908bc741f1782f9823913611fe9862e4d651539b691aeb044bdaca5cc2a5bae9f3d19cbcfa2df9ea230987144978e6fcccb0d579b080070280771324ba527674c4a0e50eb50cf342cdd8412c22f6141937eb24faffd7249310f04496a98ecf217d879d3ff2a498bfe16bc5a7b3d644f3f40760c91a1cfc63a088298e8be581d13a6e5dcd9d70001ba0f455c16053204c7804e7f724ba3d56b85536a692ebac37b48095cc13b3805f10c7ac072c9060fc85360b71ceedffb60be7785e3521b89ba1404f54c87b573d7af26e4f827f597b2675a2b4d9655abf82c6db0ebf07de74917bb2a1abd289b5c6b888f6063a5dcdeeac1de4a9c56aa8f0c61204e61248321eb9cf80aa42dbcea5c1a157a1d6e4149c4f5c72a59267ac157397666514ed0df178f31371ad9dac01b786e5a7f4ea917dd5ad1b5a9bebbb4515c025567c86d6e440019e2f8fcfd3b2f9dae6fd750e9a3c83d53621a27d0e6c040454539f25b788d3873a224eeb1cf38d41c639bfc569f19c25ce8fab14c5fdfe1cc0e5f68b11355b688391f09b5d477dba2b900eddf442aeedb4d12f6e60aa0d0ee7241521062af4805e159653e58d32a1a36228141b6acf6aebdd5dba0d52249cb5423400d0fcde57f2c6d30149b5cea6abda41dc842d4eb4f6b0a76deef05d0b15b9be5e82601479a3eb1fe961a2ca09efc5620477e1f9ee436968d1d3d3a756f1fbf931a2f9af204fe295d465f3ee491c29fd0cd31c05d08d6a861e5cacea02a524041fc3202b2e7b73a8a2118207ed53b73346b891999a9ffef6ea466147f96d433fe0325106e39aeb5eb99f1213f6fc869c344f23b9c82d636602e10a2c53c67719699c60a38168441ae42146019324f600c783d18e46f24e4f8d607cb1e74956aa57e405c99a58ca1a5bb4cdce76ac6d2ab68f3632e5ec919f04beacbe251b0800099f8f77558bcb149f3f2864e4a57c96f7b11f2a7af154f4f14703f5efa4b08607e29db60eb4cd35adae165b801de46c82b03645b65d87464575702aba7f8f20a4421b5ea3a36a2b735669bbceeadfbca90b3b118bb4aa16225166857b30188acd43177a8a38b14c097a1e2a4454993a6979d583a60012a9cd80cfb015bf5b1ca6aa53b15f97ac951738ce4877d3f8fd1a07ab3d16e730129858355"}}],"checksum":"C89B5794","existing_token":null,"client":"Browser","domain":"studio.flowgpt.com","metrics":[{"name":"2","value":0.29999999701976776,"unit":"2"},{"name":"100","value":1,"unit":"2"},{"name":"101","value":1,"unit":"2"},{"name":"102","value":0,"unit":"2"},{"name":"103","value":19,"unit":"2"},{"name":"104","value":2,"unit":"2"},{"name":"105","value":0,"unit":"2"},{"name":"106","value":0,"unit":"2"},{"name":"107","value":0,"unit":"2"},{"name":"108","value":0,"unit":"2"},{"name":"undefined","value":0,"unit":"2"},{"name":"110","value":0,"unit":"2"},{"name":"111","value":12,"unit":"2"},{"name":"112","value":0,"unit":"2"},{"name":"undefined","value":0,"unit":"2"},{"name":"3","value":5,"unit":"2"},{"name":"7","value":0,"unit":"4"},{"name":"1","value":43.70000000298023,"unit":"2"},{"name":"4","value":112.20000000298023,"unit":"2"},{"name":"5","value":0.3999999910593033,"unit":"2"},{"name":"6","value":156.29999999701977,"unit":"2"},{"name":"0","value":604.2000000029802,"unit":"2"},{"name":"8","value":1,"unit":"4"}]}'
